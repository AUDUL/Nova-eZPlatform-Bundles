{% trans_default_domain 'ezmailing' %}

{% set statusKey = "generic.mailing_statuses."~status %}

<div class="item-tabs-content">
    <ul class="nav nav-tabs" role="tablist">
        {% if status != 'all' %}
            <li class="nav-item">
                <a class="nav-link active" href="#novaezmailing-mailings-status-preview" data-toggle="tab" role="tab">
                    <img src="{{ asset("/bundles/novaezmailing/admin/images/16x16/"~status~".png") }}" class="nova-icon"/> {{ statusKey|trans|capitalize ~ " " ~ "campaign.tabs.mailings"|trans }}
                </a>
            </li>
        {% endif %}
        <li class="nav-item">
            <a class="nav-link{% if status == 'all' %} active{% endif %}" href="#novaezmailing-campaign-preview" data-toggle="tab" role="tab">{{ "campaign.tabs.campaign"|trans }}</a>
        </li>
        {% if item.locationId is not null %}
            <li class="nav-item">
                <a class="nav-link" href="#novaezmailing-content-preview" data-toggle="tab" role="tab">{{ "campaign.tabs.associated_content"|trans }}</a>
            </li>
        {% endif %}
        {% if item.mailings|length > 0 %}
            <li class="nav-item">
                <a class="nav-link" href="#novaezmailing-mailings-preview" data-toggle="tab" role="tab">{{ "common.list.users_filterer.all"|trans ~ " " ~ "campaign.tabs.mailings"|trans }}</a>
            </li>
        {% endif %}
    </ul>
    <div class="novaezmailing-tabs-content tab-content">
        {% if status != 'all' %}
            <div class="novaezmailing-ez-campaign-view tab-pane active" role="tabpanel" id="novaezmailing-mailings-status-preview">
                {% if children|length > 0 %}
                    {% include "@NovaeZMailing/admin/common/list/mailings.html.twig" with { items: children} only %}
                {% else %}
                    <p>{{ "generic.no_status_mailings"|trans }}</p>
                {% endif %}
            </div>
        {% endif %}
        <div class="novaezmailing-ez-campaign-view tab-pane{% if status == 'all' %} active{% endif %}" role="tabpanel" id="novaezmailing-campaign-preview">
            {% include "@NovaeZMailing/admin/campaign/details.html.twig" with { item: item} only %}
        </div>
        {% if item.locationId is not null %}
            <div class="novaezmailing-ez-content-view tab-pane" role="tabpanel" id="novaezmailing-content-preview">
                {{ preview|raw }}
            </div>
        {% endif %}
        {% if item.mailings|length > 0 %}
            <div class="novaezmailing-ez-mailings-view tab-pane" role="tabpanel" id="novaezmailing-mailings-preview">
                {% include "@NovaeZMailing/admin/common/list/mailings.html.twig" with { items: item.mailings} only %}
            </div>
        {% endif %}
    </div>
    <div class="novaezmailing-button-actions float-right">
        <a href="{{ url('novaezmailing_campaign_subscriptions', { campaign: item.id }) }}" class="btn btn-sm btn-info">
            <svg class="ez-icon">
                <use xlink:href="/bundles/ezplatformadminui/img/ez-icons.svg#view"></use>
            </svg>
            <span>{{ "mailing.mailing_tabs.views"|trans ~ " " ~ "menu.campaign_menu.subscriptions"|trans|capitalize }}</span>
        </a>
    </div>
</div>
