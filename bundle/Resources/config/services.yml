parameters:

services:
    _defaults:
        autowire: true
        public: false

    Novactive\Bundle\eZMailingBundle\Command\:
        resource: '../../Command'
        tags: ["console.command"]

    Novactive\Bundle\eZMailingBundle\Controller\:
        resource: '../../Controller'
        tags: ['controller.service_arguments']


    Novactive\Bundle\eZMailingBundle\Core\Provider\:
        resource: '../../Core/Provider'

    Novactive\Bundle\eZMailingBundle\Menu\Builder:
        arguments: ["@knp_menu.factory"]

    novaezmailing.menu.main:
        class: Knp\Menu\MenuItem
        factory: 'Novactive\Bundle\eZMailingBundle\Menu\Builder:createAdminMenu'
        arguments: ["@request_stack"]
        tags:
            - { name: knp_menu.menu, alias: novaezmailing.menu.admin }

    novaezmailing.menu.campaigns:
        class: Knp\Menu\MenuItem
        factory: 'Novactive\Bundle\eZMailingBundle\Menu\Builder:createCampaignMenu'
        arguments: ["@request_stack", "@doctrine.orm.entity_manager"]
        tags:
            - { name: knp_menu.menu, alias: novaezmailing.menu.campaigns }

    Novactive\Bundle\eZMailingBundle\Listener\EntityContentLink:
        tags:
            - { name: doctrine.orm.entity_listener }

    # Twig
    Novactive\Bundle\eZMailingBundle\Twig\Extension:
        tags: ['twig.extension']

    # Doctrine
    Novactive\Bundle\eZMailingBundle\DataFixtures\:
        resource: '../../DataFixtures'
        tags: ['doctrine.fixture.orm']

    gedmo.listener.timestampable:
        class: Gedmo\Timestampable\TimestampableListener
        tags:
            - { name: doctrine.event_subscriber, connection: default }
        calls:
            - [ setAnnotationReader, [ "@annotation_reader" ] ]


